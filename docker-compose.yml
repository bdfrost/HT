--- 
networks: 
  default: 
    driver: bridge
  traefik_proxy: 
    external: 
      name: traefik_proxy
services: 
  mylar: 
    container_name: mylar
    environment: 
      - TZ=America/Chicago
      - "PUID=${PUID}"
      - "PGID=${PGID}"
    image: linuxserver/mylar
    labels: 
      - traefik.enable=true
      - traefik.backend=mylar
      - "traefik.frontend.rule=Host:mylar.${DOMAINNAME}"
      - traefik.port=8090
      - traefik.docker.network=traefik_proxy
      - traefik.frontend.headers.SSLRedirect=true
      - traefik.frontend.headers.STSSeconds=315360000
      - traefik.frontend.headers.browserXSSFilter=true
      - traefik.frontend.headers.contentTypeNosniff=true
      - traefik.frontend.headers.forceSTSHeader=true
      - traefik.frontend.headers.SSLHost=example.com
      - traefik.frontend.headers.STSIncludeSubdomains=true
      - traefik.frontend.headers.STSPreload=true
      - traefik.frontend.headers.frameDeny=false
    networks: 
      - traefik_proxy
    volumes: 
      - "/mnt/storage/appdata/mylar:/config"
      - "/mnt/storage/media/comics-import:/comics-import"
      - "complete_downloads/:/downloads"
      - "comics:/comics"
  netdata: 
    cap_add: 
      - SYS_PTRACE
    container_name: netdata
    image: netdata/netdata
    labels: 
      - traefik.enable=true
      - traefik.backend=mylar
      - "traefik.frontend.rule=Host:netdata.${DOMAINNAME}"
      - traefik.port=19999
      - traefik.docker.network=traefik_proxy
      - traefik.frontend.headers.SSLRedirect=true
      - traefik.frontend.headers.STSSeconds=315360000
      - traefik.frontend.headers.browserXSSFilter=true
      - traefik.frontend.headers.contentTypeNosniff=true
      - traefik.frontend.headers.forceSTSHeader=true
      - traefik.frontend.headers.SSLHost=example.com
      - traefik.frontend.headers.STSIncludeSubdomains=true
      - traefik.frontend.headers.STSPreload=true
      - traefik.frontend.headers.frameDeny=false
    networks: 
      - traefik_proxy
    security_opt: 
      - "apparmor:unconfined"
    volumes: 
      - "/proc:/host/proc:ro"
      - "/sys:/host/sys:ro"
      - "/var/run/docker.sock:/var/run/docker.sock:ro"
  organizr: 
    container_name: organizr
    environment: 
      - "PUID=${PUID}"
      - "PGID=${PGID}"
      - "TZ=${TZ}"
    image: lsiocommunity/organizr
    labels: 
      - traefik.enable=true
      - traefik.backend=organizr
      - "traefik.frontend.rule=Host:${DOMAINNAME}"
      - traefik.port=80
      - traefik.docker.network=traefik_proxy
      - traefik.frontend.headers.SSLRedirect=true
      - traefik.frontend.headers.STSSeconds=315360000
      - traefik.frontend.headers.browserXSSFilter=true
      - traefik.frontend.headers.contentTypeNosniff=true
      - traefik.frontend.headers.forceSTSHeader=true
      - traefik.frontend.headers.SSLHost=example.com
      - traefik.frontend.headers.STSIncludeSubdomains=true
      - traefik.frontend.headers.STSPreload=true
      - traefik.frontend.headers.frameDeny=false
    networks: 
      - traefik_proxy
    restart: always
    volumes: 
      - "/mnt/storage/appdata/organizr:/config"
      - "shared:/shared"
  ouroboros: 
    container_name: ouroboros
    environment: 
      - CLEANUP=true
      - INTERVAL=300
      - LOG_LEVEL=info
      - SELF_UPDATE=true
      - "IGNORE=mongo influxdb postgres mariadb"
      - TZ=America/Chicago
    image: pyouroboros/ouroboros
    restart: unless-stopped
    volumes: 
      - "/var/run/docker.sock:/var/run/docker.sock"
  plex: 
    container_name: plex
    environment: 
      - VERSION=public
      - "PUID=${PUID}"
      - "PGID=${PGID}"
      - TZ=America/Chicago
      - "ADVERTISE_IP=\"http://SERVER-IP:32400/\""
    image: linuxserver/plex
    labels: 
      - traefik.enable=true
      - traefik.backend=plexms
      - "traefik.frontend.rule=Host:plex.${DOMAINNAME}"
      - traefik.port=32400
      - traefik.protocol=http
      - traefik.docker.network=traefik_proxy
      - traefik.frontend.headers.SSLRedirect=true
      - traefik.frontend.headers.STSSeconds=315360000
      - traefik.frontend.headers.browserXSSFilter=true
      - traefik.frontend.headers.contentTypeNosniff=true
      - traefik.frontend.headers.forceSTSHeader=true
      - traefik.frontend.headers.SSLHost=example.com
      - traefik.frontend.headers.STSIncludeSubdomains=true
      - traefik.frontend.headers.STSPreload=true
      - traefik.frontend.headers.frameDeny=false
    networks: 
      - traefik_proxy
    ports: 
      - "32400:32400/tcp"
      - "3005:3005/tcp"
      - "8324:8324/tcp"
      - "32469:32469/tcp"
      - "1900:1900/udp"
      - "32410:32410/udp"
      - "32412:32412/udp"
      - "32413:32413/udp"
      - "32414:32414/udp"
    restart: always
    volumes: 
      - "/mnt/storage/appdata/plex:/config"
      - "/mnt/storage/media/TEMP_POSTPROCESSING:/transcode"
      - "tv:/data/tvshows"
      - "homemovies:/data/homemovies"
      - "photos:/data/photos"
      - "exercisevideos:/data/exercisevideos"
      - "movies:/data/movies"
      - "shared:/shared"
  portainer: 
    container_name: portainer
    image: portainer/portainer
    labels: 
      - traefik.enable=true
      - traefik.backend=portainer
      - "traefik.frontend.rule=Host:portainer.${DOMAINNAME}"
      - traefik.port=9000
      - traefik.docker.network=traefik_proxy
      - traefik.frontend.headers.SSLRedirect=true
      - traefik.frontend.headers.STSSeconds=315360000
      - traefik.frontend.headers.browserXSSFilter=true
      - traefik.frontend.headers.contentTypeNosniff=true
      - traefik.frontend.headers.forceSTSHeader=true
      - traefik.frontend.headers.SSLHost=example.com
      - traefik.frontend.headers.STSIncludeSubdomains=true
      - traefik.frontend.headers.STSPreload=true
      - traefik.frontend.headers.frameDeny=false
    networks: 
      - traefik_proxy
    restart: always
    volumes: 
      - "/mnt/storage/appdata/portainer:/data"
      - "/var/run/docker.sock:/var/run/docker.sock"
  radarr: 
    container_name: radarr
    environment: 
      - "PUID=${PUID}"
      - "PGID=${PGID}"
    image: linuxserver/radarr
    labels: 
      - traefik.enable=true
      - traefik.backend=radarr
      - "traefik.frontend.rule=Host:radarr.${DOMAINNAME}"
      - traefik.port=7878
      - traefik.docker.network=traefik_proxy
      - traefik.frontend.headers.SSLRedirect=true
      - traefik.frontend.headers.STSSeconds=315360000
      - traefik.frontend.headers.browserXSSFilter=true
      - traefik.frontend.headers.contentTypeNosniff=true
      - traefik.frontend.headers.forceSTSHeader=true
      - traefik.frontend.headers.SSLHost=example.com
      - traefik.frontend.headers.STSIncludeSubdomains=true
      - traefik.frontend.headers.STSPreload=true
      - traefik.frontend.headers.frameDeny=false
    networks: 
      - traefik_proxy
    restart: always
    volumes: 
      - "/mnt/storage/appdata/radarr:/config"
      - "movies:/movies"
      - "complete_downloads:/downloads"
      - "shared:/shared"
  sabnzbd: 
    container_name: sabnzbd
    environment: 
      - "PUID=${PUID}"
      - "PGID=${PGID}"
      - TZ=America/Chicago
    image: linuxserver/sabnzbd
    labels: 
      - traefik.enable=true
      - traefik.backend=sabnzbd
      - "traefik.frontend.rule=Host:sabnzbd.${DOMAINNAME}"
      - traefik.port=8080
      - traefik.docker.network=traefik_proxy
      - traefik.frontend.headers.SSLRedirect=true
      - traefik.frontend.headers.STSSeconds=315360000
      - traefik.frontend.headers.browserXSSFilter=true
      - traefik.frontend.headers.contentTypeNosniff=true
      - traefik.frontend.headers.forceSTSHeader=true
      - traefik.frontend.headers.SSLHost=example.com
      - traefik.frontend.headers.STSIncludeSubdomains=true
      - traefik.frontend.headers.STSPreload=true
      - traefik.frontend.headers.frameDeny=false
    networks: 
      - traefik_proxy
    restart: always
    volumes: 
      - "/mnt/storage/appdata/sabnzbd/config:/config"
      - "incomplete-downloads:/incomplete-downloads"
      - "complete_downloads:/downloads"
      - "shared:/shared"
  sonarr: 
    container_name: sonarr
    depends_on: 
      - sabnzbd
    environment: 
      - "PUID=${PUID}"
      - "PGID=${PGID}"
    image: linuxserver/sonarr
    labels: 
      - traefik.enable=true
      - traefik.backend=sonarr
      - "traefik.frontend.rule=Host:sonarr.${DOMAINNAME}"
      - traefik.port=8989
      - traefik.docker.network=traefik_proxy
      - traefik.frontend.headers.SSLRedirect=true
      - traefik.frontend.headers.STSSeconds=315360000
      - traefik.frontend.headers.browserXSSFilter=true
      - traefik.frontend.headers.contentTypeNosniff=true
      - traefik.frontend.headers.forceSTSHeader=true
      - traefik.frontend.headers.SSLHost=example.com
      - traefik.frontend.headers.STSIncludeSubdomains=true
      - traefik.frontend.headers.STSPreload=true
      - traefik.frontend.headers.frameDeny=false
    links: 
      - sabnzbd
    networks: 
      - traefik_proxy
    restart: always
    volumes: 
      - "/mnt/storage/appdata/sonarr:/config"
      - "/mnt/storage/media/tv_import:/tv_import"
      - "tv:/tv"
      - "complete_downloads:/downloads"
      - "shared:/shared"
  tautulli: 
    container_name: tautulli
    depends_on: 
      - plex
    environment: 
      - "PUID=${PUID}"
      - "PGID=${PGID}"
      - TZ=America/Chicago
    image: linuxserver/tautulli
    labels: 
      - traefik.enable=true
      - traefik.backend=tautulli
      - "traefik.frontend.rule=Host:tautulli.${DOMAINNAME}"
      - traefik.port=8181
      - traefik.docker.network=traefik_proxy
      - traefik.frontend.headers.SSLRedirect=true
      - traefik.frontend.headers.STSSeconds=315360000
      - traefik.frontend.headers.browserXSSFilter=true
      - traefik.frontend.headers.contentTypeNosniff=true
      - traefik.frontend.headers.forceSTSHeader=true
      - traefik.frontend.headers.SSLHost=example.com
      - traefik.frontend.headers.STSIncludeSubdomains=true
      - traefik.frontend.headers.STSPreload=true
      - traefik.frontend.headers.frameDeny=false
    links: 
      - plex
    networks: 
      - traefik_proxy
    restart: always
    volumes: 
      - "/mnt/storage/appdata/plexpy:/config"
      - "/mnt/storage/appdata/plex/Library/Application\\ Support/Plex\\ Media\\ Server/Logs:/logs:ro"
      - "shared:/shared"
  traefik: 
    container_name: traefik
    domainname: "${DOMAINNAME}"
    environment: 
      - "CF_API_EMAIL=${CLOUDFLARE_EMAIL}"
      - "CF_API_KEY=${CLOUDFLARE_API_KEY}"
    hostname: traefik
    image: "traefik:latest"
    labels: 
      - traefik.enable=true
      - traefik.backend=traefik
      - "traefik.frontend.rule=Host:traefik.${DOMAINNAME}"
      - traefik.port=8282
      - traefik.docker.network=traefik_proxy
      - traefik.frontend.headers.SSLRedirect=true
      - traefik.frontend.headers.STSSeconds=315360000
      - traefik.frontend.headers.browserXSSFilter=true
      - traefik.frontend.headers.contentTypeNosniff=true
      - traefik.frontend.headers.forceSTSHeader=true
      - traefik.frontend.headers.SSLHost=example.com
      - traefik.frontend.headers.STSIncludeSubdomains=true
      - traefik.frontend.headers.STSPreload=true
      - traefik.frontend.headers.frameDeny=false
      - "traefik.frontend.auth.basic.users=${HTTP_USERNAME}:${HTTP_PASSWORD}"
    networks: 
      - default
      - traefik_proxy
    ports: 
      - "80:80"
      - "443:443"
    restart: always
    volumes: 
      - "/var/run/docker.sock:/var/run/docker.sock:ro"
      - "/mnt/storage/appdata/traefik:/etc/traefik"
      - "shared:/shared"
  ubooquity: 
    container_name: ubooquity
    environment: 
      - "PUID=${PUID}"
      - "PGID=${PGID}"
    image: linuxserver/ubooquity
    labels: 
      - traefik.enable=true
      - traefik.backend=ubooquity
      - "traefik.frontend.rule=Host:ubooquity.${DOMAINNAME}"
      - traefik.port=2202
      - traefik.docker.network=traefik_proxy
      - traefik.frontend.headers.SSLRedirect=true
      - traefik.frontend.headers.STSSeconds=315360000
      - traefik.frontend.headers.browserXSSFilter=true
      - traefik.frontend.headers.contentTypeNosniff=true
      - traefik.frontend.headers.forceSTSHeader=true
      - traefik.frontend.headers.SSLHost=example.com
      - traefik.frontend.headers.STSIncludeSubdomains=true
      - traefik.frontend.headers.STSPreload=true
      - traefik.frontend.headers.frameDeny=false
    networks: 
      - traefik_proxy
    restart: always
    volumes: 
      - "/mnt/storage/appdata/ubooquity:/config"
      - "complete_downloads/:/files"
      - "books:/books"
      - "comics:/comics"
  ubooquity-admin: 
    container_name: ubooquity
    environment: 
      - "PUID=${PUID}"
      - "PGID=${PGID}"
    image: linuxserver/ubooquity
    labels: 
      - traefik.enable=true
      - traefik.backend=ubooquity-admin
      - "traefik.frontend.rule=Host:ubooquity-admin.${DOMAINNAME}"
      - traefik.port=2203
      - traefik.docker.network=traefik_proxy
      - traefik.frontend.headers.SSLRedirect=true
      - traefik.frontend.headers.STSSeconds=315360000
      - traefik.frontend.headers.browserXSSFilter=true
      - traefik.frontend.headers.contentTypeNosniff=true
      - traefik.frontend.headers.forceSTSHeader=true
      - traefik.frontend.headers.SSLHost=example.com
      - traefik.frontend.headers.STSIncludeSubdomains=true
      - traefik.frontend.headers.STSPreload=true
      - traefik.frontend.headers.frameDeny=false
    networks: 
      - traefik_proxy
    restart: always
    volumes: 
      - "/mnt/storage/appdata/ubooquity:/config"
      - "complete_downloads:/files"
      - "books:/books"
      - "comics:/comics"
version: "2"
volumes: 
  books: 
    driver_opts: 
      device: /mnt/storage/media/books
      o: bind
      type: none
  comics: 
    driver_opts: 
      device: /mnt/storage/media/comics
      o: bind
      type: none
  complete_downloads: 
    driver_opts: 
      device: /mnt/storage/media/downloads/complete
      o: bind
      type: none
  exercisevideos: 
    driver_opts: 
      device: /mnt/storage/media/exercisevideos
      o: bind
      type: none
  home_movies: 
    driver_opts: 
      device: /mnt/storage/media/homemovies
      o: bind
      type: none
  incomplete_downloads: 
    driver_opts: 
      device: /mnt/storage/media/incomplete-downloads
      o: bind
      type: none
  movies: 
    driver_opts: 
      device: /mnt/storage/media/movies
      o: bind
      type: none
  photos: 
    driver_opts: 
      device: /mnt/storage/media/photos
      o: bind
      type: none
  shared: 
    driver_opts: 
      device: /mnt/storage/appdata/shared
      o: bind
      type: none
  tv: 
    driver_opts: 
      device: /mnt/storage-usb/media/tv
      o: bind
      type: none